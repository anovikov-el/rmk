
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="RMK CLI - Reduced Management for Kubernetes by Edenlab LLC">
      
      
      
        <link rel="canonical" href="https://edenlabllc.github.io/rmk/v0.44.0/configuration/cluster-management/cluster-management/">
      
      
        <link rel="prev" href="../../configuration-management/">
      
      
        <link rel="next" href="../exported-environment-variables/">
      
      
      <link rel="icon" href="https://edenlab.io/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Cluster management - RMK</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="grey">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cluster-management" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="RMK" class="md-header__button md-logo" aria-label="RMK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RMK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Cluster management
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="grey"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/edenlabllc/rmk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    edenlabllc/rmk
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../quickstart/" class="md-tabs__link">
        
  
    
  
  Quickstart

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../configuration-management/" class="md-tabs__link">
          
  
    
  
  Configuration and management

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../commands/" class="md-tabs__link">
        
  
    
  
  Commands

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../development-and-release-flows/" class="md-tabs__link">
        
  
    
  
  Development and release flow

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="RMK" class="md-nav__button md-logo" aria-label="RMK" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    RMK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/edenlabllc/rmk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    edenlabllc/rmk
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Configuration and management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Configuration and management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cluster management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Cluster management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Cluster management
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Cluster management
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#switch-the-context-to-an-existing-kubernetes-cluster" class="md-nav__link">
    Switch the context to an existing Kubernetes cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-rmk-cluster-providers-to-provision-and-destroy-kubernetes-clusters" class="md-nav__link">
    Use RMK cluster providers to provision and destroy Kubernetes clusters
  </a>
  
    <nav class="md-nav" aria-label="Use RMK cluster providers to provision and destroy Kubernetes clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provision-or-destroy-aws-eks-kubernetes-clusters" class="md-nav__link">
    Provision or destroy AWS EKS Kubernetes clusters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-or-delete-k3d-kubernetes-clusters" class="md-nav__link">
    Create or delete K3D Kubernetes clusters
  </a>
  
    <nav class="md-nav" aria-label="Create or delete K3D Kubernetes clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-k3d-clusters" class="md-nav__link">
    Create K3D clusters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-k3d-clusters" class="md-nav__link">
    Delete K3D clusters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../exported-environment-variables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exported environment variables
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Project management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Project management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../project-management/dependencies-management-and-project-inheritance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dependencies management and project inheritance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../project-management/preparation-of-project-repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preparation of the project repository
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../project-management/requirement-for-project-repository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requirement for project repository
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Release management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Release management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../release-management/release-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Secrets management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Secrets management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../secrets-management/secrets-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Secrets management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commands
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../development-and-release-flows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development and release flow
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#switch-the-context-to-an-existing-kubernetes-cluster" class="md-nav__link">
    Switch the context to an existing Kubernetes cluster
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-rmk-cluster-providers-to-provision-and-destroy-kubernetes-clusters" class="md-nav__link">
    Use RMK cluster providers to provision and destroy Kubernetes clusters
  </a>
  
    <nav class="md-nav" aria-label="Use RMK cluster providers to provision and destroy Kubernetes clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provision-or-destroy-aws-eks-kubernetes-clusters" class="md-nav__link">
    Provision or destroy AWS EKS Kubernetes clusters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-or-delete-k3d-kubernetes-clusters" class="md-nav__link">
    Create or delete K3D Kubernetes clusters
  </a>
  
    <nav class="md-nav" aria-label="Create or delete K3D Kubernetes clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-k3d-clusters" class="md-nav__link">
    Create K3D clusters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-k3d-clusters" class="md-nav__link">
    Delete K3D clusters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="cluster-management">Cluster management<a class="headerlink" href="#cluster-management" title="Permanent link">&para;</a></h1>
<p>RMK uses <a href="https://www.terraform.io/">Terraform</a> and <a href="https://k3d.io">K3D</a> for cluster management.</p>
<p>RMK is suitable for both simple and complex Kubernetes deployments, enabling multi-level project inheritance through native Helmfile functionality.</p>
<p>The 2 scenarios are:</p>
<ul>
<li><strong>A cluster has already been provisioned via a 3rd-party tool/service:</strong> An existing Kubernetes context will be used by RMK.</li>
<li><strong>A cluster will be provisioned from scratch using RMK</strong>: Any of the supported cluster providers for RMK, such as AWS, K3D, etc. will be utilized.</li>
</ul>
<h2 id="switch-the-context-to-an-existing-kubernetes-cluster">Switch the context to an existing Kubernetes cluster<a class="headerlink" href="#switch-the-context-to-an-existing-kubernetes-cluster" title="Permanent link">&para;</a></h2>
<p>Switching to an existing Kubernetes cluster depends on how it has been provisioned:</p>
<ul>
<li>
<p><strong>Using a 3rd party tool:</strong></p>
<p>Create a context with the name matching the pattern:</p>
<div class="highlight"><pre><span></span><code>\b&lt;project_name&gt;-&lt;environment&gt;\b
</code></pre></div>
<blockquote>
<p>The matching is <strong>case-insensitive</strong>. \
<code>\b</code> means the <strong>ASCII word boundary</strong> (<code>\w</code> on one side and <code>\W</code>, <code>\A</code>, or <code>\z</code> on the other).</p>
</blockquote>
<p>For example, if you are in the <code>project1</code> repository in the <code>develop</code> branch, any of the following Kubernetes contexts will be accepted:</p>
<div class="highlight"><pre><span></span><code>project1-develop
Project1-Develop
PROJECT1-DEVELOP
project1-develop-cluster
Project1-Develop-Cluster
PROJECT1-DEVELOP-CLUSTER
k3d-project1-develop
arn:aws:eks:us-east-1:123456789000:cluster/PROJECT1-DEVELOP-CLUSTER
</code></pre></div>
<blockquote>
<p>If there are <strong>more than one</strong> Kubernetes context which match the regular expression <strong>simultaneously</strong>, 
an <strong>error</strong> will be thrown indicating a conflict. For example, the following names will conflict:</p>
<div class="highlight"><pre><span></span><code>project1-develop
k3d-project1-develop
</code></pre></div>
</blockquote>
</li>
</ul>
<ul>
<li>
<p><strong>Using RMK cluster provider</strong>:</p>
<p>Checkout to the branch from which the K8S cluster was previously created. </p>
<p>An <a href="../../configuration-management/#initialization-of-rmk-configuration">initialization</a> might be required,
if the RMK configuration for this cluster has not been created before:</p>
<div class="highlight"><pre><span></span><code>rmk<span class="w"> </span>config<span class="w"> </span>init
</code></pre></div>
<p>The next command depends on whether a remote cluster provider (e.g., AWS) or a local one (e.g., K3D) has been used:</p>
<ul>
<li>
<p><strong>AWS:</strong></p>
<div class="highlight"><pre><span></span><code><span class="c1"># --force might required to refresh the credentials after a long period of inactivity</span>
rmk<span class="w"> </span>cluster<span class="w"> </span>switch<span class="w"> </span>--force
</code></pre></div>
</li>
</ul>
<ul>
<li>
<p><strong>K3D:</strong></p>
<p>Explicit switching to the Kubernetes context is not required, if a K3D cluster has been created already. 
RMK will switch implicitly, when running any of the <code>rmk release</code> commands.</p>
</li>
</ul>
</li>
</ul>
<p>Finally, run an RMK release command to verify the preparation of the Kubernetes context, e.g.:</p>
<div class="highlight"><pre><span></span><code>rmk<span class="w"> </span>release<span class="w"> </span>list
</code></pre></div>
<h2 id="use-rmk-cluster-providers-to-provision-and-destroy-kubernetes-clusters">Use RMK cluster providers to provision and destroy Kubernetes clusters<a class="headerlink" href="#use-rmk-cluster-providers-to-provision-and-destroy-kubernetes-clusters" title="Permanent link">&para;</a></h2>
<p>Currently, the following cluster providers are supported by RMK:</p>
<ul>
<li><a href="https://github.com/edenlabllc/aws.provisioner.infra">aws.provisioner.infra</a>: Configuration for managing AWS EKS
  clusters using Terraform. Kubernetes clusters can be provisioned from scratch and destroyed 
  via the <code>rmk cluster provision</code>, <code>rmk cluster destroy</code> commands.</li>
<li><a href="https://github.com/edenlabllc/k3d.provisioner.infra">k3d.provisioner.infra</a>: Configuration for managing
  single-machine clusters using K3D (suitable for both local development and minimal cloud deployments). 
  Kubernetes clusters can be created from scratch and deleted via the <code>rmk cluster k3d create</code>, <code>rmk cluster k3d delete</code> commands.</li>
</ul>
<p>Support for other cloud providers such as GCP, Azure will be implemented in the future.
This enhancement will include the introduction of new RMK commands and cluster providers, as well as the addition of <em>*.provisioner.infra</em> repositories.</p>
<h3 id="provision-or-destroy-aws-eks-kubernetes-clusters">Provision or destroy AWS EKS Kubernetes clusters<a class="headerlink" href="#provision-or-destroy-aws-eks-kubernetes-clusters" title="Permanent link">&para;</a></h3>
<blockquote>
<p>AWS users must have the <code>AdministratorAccess</code> permissions to be able to provision and destroy EKS clusters.</p>
</blockquote>
<p>Before provisioning the K8S cluster, modify the core configurations for the on-demand cluster. 
The core configurations are divided into two types:</p>
<ul>
<li>
<p><strong>variables</strong> (common AWS cluster management):</p>
<p><em>Path:</em> <code>etc/clusters/aws/&lt;environment&gt;/values/variables.auto.tfvars</code></p>
<p><em>Frequently changed values:</em></p>
<div class="highlight"><pre><span></span><code><span class="c1"># k8s user list</span>
<span class="na">k8s_master_usernames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]</span><span class="c1"> # list of AWS IAM users for K8S cluster management</span>
<span class="na">k8s_cluster_version</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.27&quot;</span><span class="c1"> # current version of K8S (EKS) control plane</span>
<span class="c1"># ...</span>
</code></pre></div>
<blockquote>
<p>Full list of input Terraform variables: <code>.PROJECT/inventory/clusters/aws.provisioner.infra-&lt;version&gt;/terraform/variables.tf</code></p>
</blockquote>
</li>
</ul>
<ul>
<li>
<p><strong>worker-groups</strong> (resources for AWS worker nodes):</p>
<p><em>Path:</em> <code>etc/clusters/aws/&lt;environment&gt;/values/worker-groups.auto.tfvars</code></p>
<p><em>Frequently changed values:</em></p>
<div class="highlight"><pre><span></span><code><span class="na">worker_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="na">instance_type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;t3.xlarge&quot;</span>
<span class="w">    </span><span class="na">additional_userdata</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;t3.xlarge&quot;</span>
<span class="w">    </span><span class="na">asg_desired_capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="na">asg_max_size</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="na">asg_min_size</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="na">ami_id</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ami-0dd8af8522cf16846&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="c1">  # ...</span>
<span class="p">]</span>
</code></pre></div>
<ul>
<li><code>instance_type</code>: <a href="https://aws.amazon.com/ec2/instance-types">AWS EC2 instance type</a></li>
<li><code>asg_desired_capacity</code>: Number of nodes of a specific group.</li>
<li><code>ami_id</code>: Identifier of AWS AMI image for EKS.<blockquote>
<p>Each AWS region requires its own AMI image ID. To determine the appropriate ID for a specific region, run the following command:</p>
<div class="highlight"><pre><span></span><code><span class="nv">AWS_PROFILE</span><span class="o">=</span><span class="k">$(</span>rmk<span class="w"> </span>--lf<span class="o">=</span>json<span class="w"> </span>config<span class="w"> </span>view<span class="w"> </span><span class="p">|</span><span class="w"> </span>yq<span class="w"> </span><span class="s1">&#39;.config.Profile&#39;</span><span class="k">)</span><span class="w"> </span><span class="se">\</span>
<span class="nv">AWS_CONFIG_FILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.aws/config_</span><span class="k">$(</span>rmk<span class="w"> </span>--lf<span class="o">=</span>json<span class="w"> </span>config<span class="w"> </span>view<span class="w"> </span><span class="p">|</span><span class="w"> </span>yq<span class="w"> </span><span class="s1">&#39;.config.Profile&#39;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="nv">AWS_SHARED_CREDENTIALS_FILE</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.aws/credentials_</span><span class="k">$(</span>rmk<span class="w"> </span>--lf<span class="o">=</span>json<span class="w"> </span>config<span class="w"> </span>view<span class="w"> </span><span class="p">|</span><span class="w"> </span>yq<span class="w"> </span><span class="s1">&#39;.config.Profile&#39;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="nv">AWS_PAGER</span><span class="o">=</span><span class="w"> </span><span class="se">\</span>
aws<span class="w"> </span>ssm<span class="w"> </span>get-parameter<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--name<span class="w"> </span>/aws/service/eks/optimized-ami/&lt;eks_control_plane_version&gt;/amazon-linux-2/recommended/image_id<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--region<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>rmk<span class="w"> </span>--lf<span class="o">=</span>json<span class="w"> </span>config<span class="w"> </span>view<span class="w"> </span><span class="p">|</span><span class="w"> </span>yq<span class="w"> </span><span class="s1">&#39;.config.Region&#39;</span><span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>text<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--query<span class="w"> </span>Parameter.Value
</code></pre></div>
<blockquote>
<p>Replace <code>&lt;eks_control_plane_version&gt;</code> with a correct version.</p>
</blockquote>
</blockquote>
</li>
</ul>
</li>
</ul>
<p>To start provisioning a Kubernetes cluster, run the commands:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># prepare only plan</span>
rmk<span class="w"> </span>cluster<span class="w"> </span>provision<span class="w"> </span>--plan
<span class="c1"># prepare plan and launch it</span>
rmk<span class="w"> </span>cluster<span class="w"> </span>provision
</code></pre></div>
<blockquote>
<p>When the K8S cluster is ready, RMK automatically switches the kubectl context to the newly created K8S cluster.</p>
</blockquote>
<p>To destroy a Kubernetes cluster, run the command:</p>
<div class="highlight"><pre><span></span><code>rmk<span class="w"> </span>cluster<span class="w"> </span>destroy
</code></pre></div>
<h3 id="create-or-delete-k3d-kubernetes-clusters">Create or delete K3D Kubernetes clusters<a class="headerlink" href="#create-or-delete-k3d-kubernetes-clusters" title="Permanent link">&para;</a></h3>
<p>RMK supports managing single-node Kubernetes clusters using <a href="https://k3d.io">K3D</a>.</p>
<p>The CLI will create a cluster according to the declarative instruction for K3D: 
<code>.PROJECT/inventory/clusters/k3d.provisioner.infra-&lt;version&gt;/k3d.yaml</code>.</p>
<blockquote>
<p>Prerequisites:</p>
<ol>
<li>Create a separate feature branch: <code>feature/&lt;issue_key&gt;-&lt;issue_number&gt;-&lt;issue_description&gt;</code>.</li>
<li><a href="../../configuration-management/#initialization-of-rmk-configuration">Initialize configuration</a> for this branch with the <code>localhost</code> root domain name:</li>
</ol>
<div class="highlight"><pre><span></span><code>rmk<span class="w"> </span>config<span class="w"> </span>init<span class="w"> </span>--root-domain<span class="o">=</span>localhost
</code></pre></div>
</blockquote>
<h4 id="create-k3d-clusters">Create K3D clusters<a class="headerlink" href="#create-k3d-clusters" title="Permanent link">&para;</a></h4>
<blockquote>
<p>By default, RMK will use <code>volume-host-path</code> as the current directory:</p>
</blockquote>
<p>Run the following command:</p>
<div class="highlight"><pre><span></span><code>rmk<span class="w"> </span>cluster<span class="w"> </span>k3d<span class="w"> </span>create
</code></pre></div>
<blockquote>
<p>When the Kubernetes cluster is ready, RMK automatically switches the kubectl context to the newly created Kubernetes cluster.</p>
</blockquote>
<h4 id="delete-k3d-clusters">Delete K3D clusters<a class="headerlink" href="#delete-k3d-clusters" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>rmk<span class="w"> </span>cluster<span class="w"> </span>k3d<span class="w"> </span>delete
</code></pre></div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">August 20, 2024</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © EDENLAB. ALL RIGHTS RESERVED, 2021 - 2024
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["search.highlight", "search.share", "search.suggest", "navigation.expand", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "navigation.path"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>